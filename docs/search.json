{
  "articles": [
    {
      "path": "about.html",
      "title": "+Info",
      "description": "Información adicional",
      "author": [],
      "contents": "\r\nDocentes | Juan Pablo Ruiz Nicolini, Pablo Tiscornia\r\nAlumna | Ángeles Suarez Anzorena\r\nUTDT | MEU 2023\r\n\r\n\r\n\r\n",
      "last_modified": "2023-12-23T14:19:44-03:00"
    },
    {
      "path": "analisis.html",
      "title": "CABA Vecinal",
      "description": "La Ciudad Autónoma de Buenos Aires en 15 minutos",
      "author": [],
      "contents": "\r\nLa ya conocida teoría de las “Ciudades de 15 minutos”, término acuñado por Carlos Moreno (2016), cuenta ya con 7 años de “popularidad”, en los que ha generado un intenso debate con partidarios y detractores apasionados.\r\nSi bien la teoría y los conceptos que presenta no son nuevos, ya que han sido tratados previamente por Clarence Perry (1929), Jane Jacobs (1961), Carmen Belloni (1984),y Sandra Bonfiglioli (1997), entre otros; la temática ha recobrado relevancia en el contexto actual luego del gran impacto que ha tenido la pandemia por COVID 19.\r\nPor esa razón, este estudio se propone analizar los datos disponibles de la Ciudad Autónoma de Buenos Aires para evaluar en qué medida puede ser considerada una “ciudad de 15 minutos”, una Ciudad Vecinal.\r\n\r\nPRIMER PASO \r\n | Metodología de investigación \r\n\r\nPara llevar esto a cabo, conformé una muestra territorial, tomando un punto aleatorio dentro de cada barrio de la Ciudad de Buenos Aires.\r\nA partir de estos puntos, construí una isocrona definida a 15minutos a pie y tomé esas porciones del territorio como las áreas a estudiar.\r\n\r\nCódigo\r\n\r\n\r\nbarrios <- st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-educacion/barrios/barrios.geojson\") %>% \r\n  mutate(AREAKM2 = round((AREA/1000000),2)) %>% \r\n  st_transform(4326)%>%\r\n  arrange(BARRIO)\r\n\r\nFALSE Reading layer `barrios' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-educacion/barrios/barrios.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 48 features and 5 fields\r\nFALSE Geometry type: MULTIPOLYGON\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.53152 ymin: -34.70529 xmax: -58.33515 ymax: -34.52649\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\nbarrios_inter = barrios %>% \r\n  select(BARRIO,AREAKM2)\r\n\r\nmb_eevv = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/secretaria-de-desarrollo-urbano/espacios-verdes/espacio_verde_publico.geojson\") %>% \r\n  st_make_valid() \r\n\r\nFALSE Reading layer `espacio_verde_publico_wgs84' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/secretaria-de-desarrollo-urbano/espacios-verdes/espacio_verde_publico.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 1896 features and 25 fields\r\nFALSE Geometry type: MULTIPOLYGON\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.53175 ymin: -34.70557 xmax: -58.33983 ymax: -34.52657\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\n#eevv_unido = st_union(mb_eevv)\r\n\r\ncentroides = st_centroid(barrios) %>% \r\n             st_transform(4326)\r\n\r\n# RESTO LAS GEOMETRIAS DE ESPACIOS VERDES A LOS BARRIOS PARA QUE CUANDO GENERE LOS PUNTOS ALEATORIOS, NO CAIGAN AHÍ (Restar geometria2 de geometria1):\r\n\r\n#barrios_sverde = st_difference(barrios, eevv_unido) \r\n\r\n#LO GUARDO Y LO LLAMO PARA NO REPETIR:\r\n\r\n#barrios_sverde = st_read(\"data/barrios_sverde.geojson\")\r\n\r\n#GENERO Y GUARDO LOS PTOS ALEATORIOS PORQUE SINO CADA VEZ QUE CORRO EL CODIGO, SON NUEVOS:\r\n\r\n#puntos_aleatoriossv <- rowwise(barrios_sverde) %>%\r\n#  mutate(punto_aleatorio = st_sample(geometry, 1, type = \"random\")) %>% \r\n#  st_drop_geometry(geometry) %>% \r\n#  st_as_sf()\r\n\r\n#st_write(puntos_aleatoriossv, \"data/nuevos_puntos.geojson\")\r\n\r\npuntos_aleatorios = st_read(\"data/nuevos_puntos.geojson\")\r\n\r\nFALSE Reading layer `nuevos_puntos_finalisimo' from data source \r\nFALSE   `I:\\Mi unidad\\02-ESTUDIOS\\00-MEU\\MU123 - Instrumentos de análisis urbano II\\IAUII_TRABAJO_FINAL\\data\\nuevos_puntos.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 48 features and 6 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.53054 ymin: -34.69186 xmax: -58.35569 ymax: -34.54348\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\n\r\nCódigo\r\n\r\n\r\n#ISOCRONAS PARA PUNTOS ALEATORIOS EN BARRIOS DESCONTANDO ESPACIOS VERDES:\r\n#ESTA SECCIÓN VOY A EJECUTARLA UNA SOLA VEZ Y GUARDO EL OBJETO PORQUE TARDA MUCHO (itero en cada punto para hacer las isocronas):\r\n\r\n#lista_isocronassv <- lapply(puntos_aleatorio$geometry, function(point) {\r\n#  osrmIsochrone(loc = st_coordinates(point),\r\n#                breaks = seq(from = 0, to = 15, by = 15),\r\n#                res = 45,\r\n#                osrm.profile = \"foot\")\r\n#})\r\n\r\n# Combino las isocronas\r\n#isocronas_bindsv <- do.call(rbind, lista_isocronassv)\r\n\r\n#st_write(isocronas_bindsv, \"data/isocronas.geojson\")\r\n\r\n\r\n\r\n#Ahora simplemente llamo la base que armé y le uno los nombres por orden de las observaciones\r\nisocronas_barrios = st_read(\"data/isocronas.geojson\") %>% \r\n                    st_transform(4326) %>% \r\n                    cbind(st_drop_geometry(centroides)) %>% \r\n                    st_make_valid()\r\n\r\nFALSE Reading layer `isocronas_finalisimo' from data source \r\nFALSE   `I:\\Mi unidad\\02-ESTUDIOS\\00-MEU\\MU123 - Instrumentos de análisis urbano II\\IAUII_TRABAJO_FINAL\\data\\isocronas.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 48 features and 3 fields\r\nFALSE Geometry type: MULTIPOLYGON\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.53824 ymin: -34.69955 xmax: -58.34446 ymax: -34.53483\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\n#Hago una base simplificada para relacionar con los puntos\r\nisocronas15 = isocronas_barrios %>% \r\n                          select(BARRIO)\r\n\r\n\r\nConsiderando las diferentes distancias vinculadas a la cotidianeidad de las necesidades y a la magnitud del equipamiento que las sirve, creo isocronas a 30m para abarcar esas variables:\r\n\r\nCódigo\r\n\r\n\r\n#CONSTRUYO ISOCRONAS DE 30M PARA LOS SERVICIOS MENOS COTIDIANOS\r\n#lista_isocronas30 <- lapply(puntos_aleatorios$geometry, function(point) {\r\n#  osrmIsochrone(loc = st_coordinates(point),\r\n#                breaks = seq(from = 0, to = 30, by = 30),\r\n#                res = 40,\r\n#                osrm.profile = \"foot\")\r\n#})\r\n\r\n# Combino las isocronas\r\n#isocronas_bind30 <- do.call(rbind, lista_isocronas30)\r\n\r\n#st_write(isocronas_bind30, \"data/isocronas30.geojson\")\r\n\r\nisocronas30 = st_read(\"data/isocronas30.geojson\")%>% \r\n                    st_transform(4326) %>% \r\n                    cbind(st_drop_geometry(centroides)) %>% \r\n                    st_make_valid()%>% \r\n                    select(BARRIO)\r\n\r\nFALSE Reading layer `isocronas30' from data source \r\nFALSE   `I:\\Mi unidad\\02-ESTUDIOS\\00-MEU\\MU123 - Instrumentos de análisis urbano II\\IAUII_TRABAJO_FINAL\\data\\isocronas30.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 48 features and 3 fields\r\nFALSE Geometry type: MULTIPOLYGON\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.54927 ymin: -34.7089 xmax: -58.33865 ymax: -34.52605\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\nResultado de las isocronas en relación con los puntos y el perímetro de cada barrio:\r\n\r\nCódigo\r\n\r\n\r\nmapa_isocronas =\r\nleaflet(st_zm(barrios) %>% st_transform(4326)) %>%\r\n  addTiles() %>%\r\n  addProviderTiles(providers$CartoDB.Positron, group = \"OSM\",\r\n                   options = providerTileOptions(minzoom = 1, maxzoom = 15)) %>%\r\n  addProviderTiles(providers$Esri.WorldImagery, group = \"Satelite\") %>%\r\n  addLayersControl(\r\n    baseGroups = c(\"OSM\",\"Satelite\"), \r\n    overlayGroups = c(\"Barrios CABA\",\"Puntos Aleatorios\",\"Isocronas 15m\",\"Isocronas 30m\" ))%>% \r\n  \r\n  addPolygons(data= barrios,\r\n              color = \"black\",\r\n              weight = 0.4,\r\n              opacity = 0.7,\r\n              fillColor = \"white\",\r\n              fillOpacity = 0.5,\r\n              popup = ~paste(\"<strong> BARRIO: <\/strong>\", BARRIO,\"<br> <strong> ÁREA: <\/strong>\", AREAKM2, \"km2\"),\r\n              group = \"Barrios CABA\") %>% \r\n  \r\n  addPolygons(data= isocronas30,\r\n              color = \"#d0e0e3\",\r\n              weight = 0.4,\r\n              opacity = 0.7,\r\n              fillColor = \"#d0e0e3\",\r\n              fillOpacity = 0.5,\r\n              popup = ~paste(\"<strong> BARRIO: <\/strong>\", BARRIO),\r\n              group = \"Isocronas 30m\")%>%\r\n\r\n  addPolygons(data= isocronas15,\r\n              color = \"#a2c4c9\",\r\n              weight = 0.4,\r\n              opacity = 0.7,\r\n              fillColor = \"#a2c4c9\",\r\n              fillOpacity = 0.5,\r\n              popup = ~paste(\"<strong> BARRIO: <\/strong>\", BARRIO),\r\n              group = \"Isocronas 15m\") %>% \r\n  \r\n      addCircleMarkers(data=puntos_aleatorios,\r\n              fillColor = \"#45818e\",\r\n              weight = 0.5,\r\n              color = \"#45818e\",\r\n              fillOpacity = 0.5,\r\n              radius = 2,\r\n              popup = ~paste(\"<strong> BARRIO: <\/strong>\", BARRIO),\r\n              group = \"Puntos Aleatorios\") \r\n\r\n\r\n\r\n\r\n\r\nSi bien en un planteo inicial había tomdo como origen de las isocronas los centroides de los barrios, posteriormente modifiqué esto para que la muestra pudiese representar las condiciones en las periferias y superposiciones entre geometrías, ya que son también condiciones reales que se dan dentro de la ciudad, y deben ser contempladas.\r\nPor otro lado, para simplificar el trabajo de intersección de las bases con las isocronas, y la búsqueda de datos en osm, definí algunas funciones inicialmente:\r\n\r\nCódigo\r\n\r\n\r\n#DEFINO ESTA FUNCION PARA SIMPLIFICAR EL FILTRO DE LAS VARIABLES CON LA GEOMETRIA DE LAS ISOCRONAS Y HACER EL CONTEO\r\nconteo_interno = function(db,isocronas, nombre_variable){\r\n  db %>% \r\n  st_transform(4326) %>% \r\n  st_intersection(isocronas) %>%\r\n  group_by(BARRIO) %>%\r\n  summarise(!!nombre_variable := n())\r\n}\r\n\r\n#DEFINO LA BBOX DE CABA PARA LIMITAR BUSQUEDAS EN OSM\r\nbbox_caba <- getbb(\"Ciudad Autónoma de Buenos Aires, Argentina\")\r\n\r\n#DEFINO UNA FUNCION PARA HACER BUSQUEDAS E OSM\r\nbuscar_osm <- function(nombre_objeto, clave) {\r\n  opq_objeto <- opq(bbox_caba)\r\n  opq_objeto <- add_osm_feature(opq_objeto, key = clave)\r\n  opq_objeto <- osmdata_sf(opq_objeto)\r\n  \r\n  assign(nombre_objeto, opq_objeto, envir = .GlobalEnv)\r\n}\r\n\r\n\r\n\r\nBASES DE DATOS \r\n | Ejes y Variables \r\n\r\nCon el territorio definido, comencé la busqueda de bases de datos geográficos disponibles y/o construibles para conformar los distintos ejes y variables con los que se pueden representar las necesidades cotidianas que requieren esta proximidad.\r\n\r\nCódigo\r\n\r\n\r\ngs4_deauth() # Eliminar auth interactivo (link publico)\r\nvariables = read_sheet(\"https://docs.google.com/spreadsheets/d/15K_hQPI8NeN-vGZoND9f9yWvzg82VgPx-S1nffsJ3LQ/edit#gid=0\")\r\n\r\ntabla_variables=\r\ndatatable(variables, \r\n  options = list(\r\n    searching = FALSE,\r\n    rownames = FALSE,\r\n    pageLength = 10,\r\n    dom = 't',\r\n    scrollY = '300px',\r\n    scrollX = FALSE,  # Evitar el desplazamiento horizontal\r\n    language = list(zeroRecords = \"No existen datos para los requerimientos seleccionados\"),\r\n    autoWidth = TRUE,\r\n    columnDefs = list(\r\n      list(targets = 0, visible = FALSE)\r\n    )\r\n  )\r\n)\r\n\r\n\r\n\r\n\r\n\r\nAl analizar las bases disponibles, y las que podía construir desde búsquedas con OSM, se hizo evidente que eran insuficientes y que estos datos no podrían representar la realidad que deseaba investigar.\r\nSin embargo, continué con el trabajo, ya que dejando una base y una metodología armada, posteriormente se podría completar/mejorar con datos nuevos que vayan apareciendo.\r\n(Resalto este conflicto, ya que las ponderaciones sobre las variables que construyen cada eje, y a su vez el índice, se hicieron desde esta deficiencia y, por lo tanto, no tienen ninguna rigurosidad ni validez. Solo sirven a modo de ejercicio)\r\n\r\nNECESIDADES COTIDIANAS \r\n | Ejes y Variables \r\n\r\n\r\n01| Autoabastecimiento\r\n\r\nSelecciono y cuento los puntos de autoabastecimiento dentro de las isocronas según nivel de cotidianeidad de la necesidad.\r\nLas bases disponibles cuentan con datos de:\r\n- Comercios (15min)\r\n- Ferias (30min)\r\n- Locales gastronómicos (15min)\r\n- Estaciones de servicio (30min)\r\n\r\nCódigo\r\n\r\n\r\n#AUTOABASTECIMIENTO--------------------------------------------------------------\r\n\r\n#HAGO UNA BUQUEDA DE LOS COMERCIOS CON OSM, GUARDO LA NUEVA BASE Y DESHABILITO EL PROCESO PARA NO REPETIRLO:\r\n\r\n#buscar_osm(\"a_comercio\", \"shop\")\r\n\r\n#a_comercio_pt = a_comercio$osm_points %>% \r\n#  select(name)\r\n\r\n#a_comercio_mpol = a_comercio$osm_multipolygons %>% \r\n#  select(name) %>% \r\n#  st_centroid() %>% \r\n#  st_transform(4326)\r\n\r\n#a_comercio_pol = a_comercio$osm_polygons %>% \r\n#  select(name)%>% \r\n#  st_centroid() %>% \r\n#  st_transform(4326)\r\n\r\n#a_comercio = rbind(a_comercio_pt,a_comercio_pol,a_comercio_mpol) %>% \r\n#  conteo_interno(isocronas15,\"n_a_comercio\")\r\n\r\n#st_write(a_comercio, \"data/a_comercio.geojson\")\r\n\r\na_comercio = st_read(\"data/a_comercio.geojson\")\r\n\r\nFALSE Reading layer `a_comercio' from data source \r\nFALSE   `I:\\Mi unidad\\02-ESTUDIOS\\00-MEU\\MU123 - Instrumentos de análisis urbano II\\IAUII_TRABAJO_FINAL\\data\\a_comercio.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 47 features and 2 fields\r\nFALSE Geometry type: MULTIPOINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.53141 ymin: -34.69902 xmax: -58.3544 ymax: -34.54045\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\na_ferias = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-espacio-publico-e-higiene-urbana/ferias-mercados/ferias-itinerantes-de-abastecimiento-barrial.geojson\") %>% \r\n  conteo_interno(isocronas30,\"n_a_ferias\")\r\n\r\nFALSE Reading layer `ferias_itinerantes_de_abastecimiento_barrial_WGS84' from data source `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-espacio-publico-e-higiene-urbana/ferias-mercados/ferias-itinerantes-de-abastecimiento-barrial.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 184 features and 14 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.52895 ymin: -34.68781 xmax: -58.35888 ymax: -34.54123\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\na_eess = read.xlsx(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-educacion/estaciones-servicio/estaciones_servicio_caba.xlsx\") %>% \r\n  filter(!is.na(lat)) %>% \r\n  st_as_sf(coords = c(\"long\", \"lat\"), crs = 4326) %>% \r\n  conteo_interno(isocronas30,\"n_a_eess\")\r\n\r\na_gastronomicos = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ente-de-turismo/oferta-establecimientos-gastronomicos/oferta-gastronomica.geojson\") %>% \r\n  conteo_interno(isocronas15,\"n_a_gastronomicos\")\r\n\r\nFALSE Reading layer `oferta-gastronomica' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ente-de-turismo/oferta-establecimientos-gastronomicos/oferta-gastronomica.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 2823 features and 18 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.52957 ymin: -34.69226 xmax: -58.35505 ymax: -34.53663\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\nLuego aplico la ponderación teniendo en cuenta la importancia de la presencia de estos bienes/servicios, y la cantidad necesaria para que la oferta sea variada y competitiva.\r\n\r\nCódigo\r\n\r\n\r\n#LLAMO TODAS LAS BASES DE DATOS Y LAS FILTRO SEGUN SI SON DE LAS CATEGORIAS DE ANALISIS\r\nbases_de_datos <- ls() %>%\r\n  grep(\"^a_\", ., value = TRUE) %>%\r\n  lapply(get)\r\n\r\n# ARMO UNA BASE UNIFICADA HACIENDO LEFT_JOINS ITERATIVOS CON AS BD\r\nf_barrios_datos <- function() {\r\n  bases_de_datos %>% \r\n  reduce(function(df1, df2) {\r\n    left_join(df1, df2 %>% st_drop_geometry(), by = \"BARRIO\") %>%\r\n      replace(is.na(.), 0)\r\n  }, .init = barrios_inter)}\r\n\r\nbarrios_datos = f_barrios_datos() %>% \r\n  mutate(subindice = ifelse(n_a_comercio >= 10, 0.6, n_a_comercio*0.1) +\r\n                              ifelse(n_a_eess >= 1, 0.08, 0)+\r\n                              ifelse(n_a_ferias >= 1, 0.02, 0)+\r\n                              ifelse(n_a_gastronomicos >= 6, 0.28, 0),\r\n          popup = paste(\"<strong> BARRIO: <\/strong>\", BARRIO,\"<br> \r\n                             <strong> ÁREA: <\/strong>\", AREAKM2, \"km2<br> \r\n                             <strong> I.AUTOABASTECIMIENTO: <\/strong>\",subindice,\"<br> \r\n                             <strong>  COMERCIOS: <\/strong>\", n_a_comercio,\"<br> \r\n                             <strong>  FERIAS: <\/strong>\", n_a_ferias,\"<br> \r\n                             <strong>  LOCALES GASTRONÓMICOS: <\/strong>\", n_a_gastronomicos,\"<br> \r\n                             <strong>  ESTACIONES DE SERVICIO: <\/strong>\", n_a_eess))\r\n\r\nbarrios_datos_a = barrios_datos\r\n\r\n\r\nConfiguro el mapa por primera vez y lo defino como una función.\r\n\r\nCódigo\r\n\r\n\r\n# Definir una función para crear una paleta de colores personalizada\r\ncolores <- colorRampPalette(c(\"#d0e0e3\", \"#a2c4c9\", \"#45818e\"))\r\n\r\n# Generar la paleta basada en tu rango de valores (0 a 1)\r\nn <- 20  # Número de colores en la paleta\r\npaleta <- colores(n)\r\n\r\npal_i <- colorNumeric(paleta, domain = c(0,1))\r\n\r\nmapa_subindice = function(){\r\nleaflet(st_zm(barrios) %>% st_transform(4326)) %>%\r\n  addTiles() %>%\r\n  addProviderTiles(providers$CartoDB.Positron, group = \"OSM\",\r\n                   options = providerTileOptions(minzoom = 1, maxzoom = 15)) %>%\r\n  addProviderTiles(providers$Esri.WorldImagery, group = \"Satelite\") %>%\r\n  addLayersControl(\r\n    baseGroups = c(\"OSM\",\"Satelite\"), \r\n    overlayGroups = c(\"Subindice por barrio\",\"Puntos Aleatorios\"))%>% \r\n  \r\n  addPolygons(data= barrios_datos,\r\n              color = ~pal_i(subindice),\r\n              weight = 0.4,\r\n              opacity = 0.7,\r\n              fillColor = ~pal_i(subindice),\r\n              fillOpacity = 0.8,\r\n              popup = ~popup,\r\n              group = \"Subindice por barrio\") %>% \r\n  \r\n      addCircleMarkers(data=puntos_aleatorios,\r\n              fillColor = \"#45818e\",\r\n              weight = 0.5,\r\n              color = \"#45818e\",\r\n              fillOpacity = 0.5,\r\n              radius = 2,\r\n              popup = ~paste(\"<strong> BARRIO: <\/strong>\", BARRIO),\r\n              group = \"Puntos Aleatorios\") }\r\n\r\n\r\nSUBINDICE AUTOABASTECIMIENTO|\r\nMapeo por barrio basado en los valores de la muestra\r\n\r\n\r\n\r\n\r\n02| Cultura\r\n\r\nSelecciono y cuento los puntos de oferta cultural dentro de las isocronas según nivel de cotidianeidad de la necesidad.\r\nLas bases disponibles cuentan con datos de:\r\n- Centros culturales (15min)\r\n- Monumentos (30min)\r\n\r\nCódigo\r\n\r\n\r\n# CULTURA------------------------------------------------------------------------\r\n\r\nc_culturales = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-cultura/espacios-culturales/espacios-culturales.geojson\")  %>% conteo_interno(isocronas15,\"n_c_culturales\")\r\n\r\nFALSE Reading layer `Base_espacios_culturales_primera_modificacion' from data source `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-cultura/espacios-culturales/espacios-culturales.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 3031 features and 30 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.52924 ymin: -34.6943 xmax: -58.34907 ymax: -34.53574\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\nc_monumentos = read.xlsx(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-espacio-publico-e-higiene-urbana/monumentos/monumentos.xlsx\") %>% \r\n  filter(!is.na(LATITUD)) %>% \r\n  st_as_sf(coords = c(\"LONGITUD\", \"LATITUD\"), crs = 4326) %>% \r\n  conteo_interno(isocronas30,\"n_c_monumentos\") %>% \r\n  filter(!is.na(BARRIO))\r\n\r\n\r\nLuego aplico la ponderación teniendo en cuenta la importancia de la presencia de estos bienes/servicios, y la cantidad necesaria para que la oferta sea variada y competitiva.\r\n\r\nCódigo\r\n\r\n\r\n#LLAMO TODAS LAS BASES DE DATOS Y LAS FILTRO SEGUN SI SON DE LAS CATEGORIAS DE ANALISIS\r\nbases_de_datos <- ls() %>%\r\n  grep(\"^c_\", ., value = TRUE) %>%\r\n  lapply(get)\r\n\r\nbarrios_datos = f_barrios_datos() %>%  \r\n  mutate(subindice = ifelse(n_c_culturales >= 1, 0.85, 0) +\r\n                     ifelse(n_c_monumentos >= 1, 0.15, 0),\r\n         popup = paste(\"<strong> BARRIO: <\/strong>\", BARRIO,\"<br> \r\n                             <strong> ÁREA: <\/strong>\", AREAKM2, \"km2<br> \r\n                             <strong> I.CULTURA: <\/strong>\",subindice,\"<br> \r\n                             <strong>  ESPACIOS CULTURALES: <\/strong>\", n_c_culturales,\"<br> \r\n                             <strong>  MONUMENTOS: <\/strong>\", n_c_monumentos))\r\n\r\nbarrios_datos_c = barrios_datos\r\n\r\n\r\nSUBINDICE CULTURA|\r\nMapeo por barrio basado en los valores de la muestra\r\n\r\n\r\n\r\n\r\n03| Deportes\r\n\r\nSelecciono y cuento los puntos de oferta para realizar actividades deportivas dentro de las isocronas según nivel de cotidianeidad de la necesidad.\r\nLas bases disponibles cuentan con datos de:\r\n- Clubes (15min)\r\n- Polideportivos (30min)\r\n\r\nCódigo\r\n\r\n\r\n#DEPORTES-------------------------------------------------------------------------\r\n\r\nd_polideportivos = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/vicejefatura-de-gobierno/polideportivos/polideportivos.geojson\")  %>% \r\n  conteo_interno(isocronas30,\"n_d_polideportivos\")\r\n\r\nFALSE Reading layer `polideportivos' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/vicejefatura-de-gobierno/polideportivos/polideportivos.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 16 features and 14 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.51376 ymin: -34.66801 xmax: -58.37641 ymax: -34.5531\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\nd_clubes = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/vicejefatura-de-gobierno/clubes/clubes.geojson\") %>% \r\n  conteo_interno(isocronas15,\"n_d_clubes\")\r\n\r\nFALSE Reading layer `clubes' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/vicejefatura-de-gobierno/clubes/clubes.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 301 features and 20 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.52924 ymin: -34.68844 xmax: -58.35865 ymax: -34.53596\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\nLuego aplico la ponderación teniendo en cuenta la importancia de la presencia de estos servicios, y la cantidad necesaria para que la oferta sea variada y competitiva.\r\n\r\nCódigo\r\n\r\n\r\n#LLAMO TODAS LAS BASES DE DATOS Y LAS FILTRO SEGUN SI SON DE LAS CATEGORIAS DE ANALISIS\r\nbases_de_datos <- ls() %>%\r\n  grep(\"^d_\", ., value = TRUE) %>%\r\n  lapply(get)\r\n\r\nbarrios_datos = f_barrios_datos() %>% \r\n  mutate(subindice = ifelse(n_d_clubes >= 2, 0.6, 0) +\r\n                     ifelse(n_d_polideportivos >= 1, 0.4, 0),\r\n         popup = paste(\"<strong> BARRIO: <\/strong>\", BARRIO,\"<br> \r\n                             <strong> ÁREA: <\/strong>\", AREAKM2, \"km2<br> \r\n                             <strong> I.DEPORTE: <\/strong>\",subindice,\"<br> \r\n                             <strong>  CLUBES: <\/strong>\", n_d_clubes,\"<br> \r\n                             <strong>  POLIDEPORTIVOS: <\/strong>\", n_d_polideportivos))\r\n\r\nbarrios_datos_d = barrios_datos\r\n\r\n\r\nSUBINDICE DEPORTE|\r\nMapeo por barrio basado en los valores de la muestra\r\n\r\n\r\n\r\n\r\n04| Educación\r\n\r\nSelecciono y cuento los puntos de oferta para realizar actividades deportivas dentro de las isocronas según nivel de cotidianeidad de la necesidad.\r\nLas bases disponibles cuentan con datos de:\r\n- Jardines Comunitarios (15min)\r\n- Centros de primera infancia (15min)\r\n- Centros de desarrollo infantil (15min)\r\n- Establecimientos educativos (15min)\r\n- Universidades (30min)\r\n- Bibliotecas (30min)\r\n\r\nCódigo\r\n\r\n\r\n#EDUCACION----------------------------------------------------------------------\r\n\r\ne_jardinesc = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-desarrollo-humano-y-habitat/jardines-comunitarios/jardin_comunitario.geojson\") %>% \r\n  conteo_interno(isocronas15,\"n_e_jardinesc\")\r\n\r\nFALSE Reading layer `jardin_comunitario' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-desarrollo-humano-y-habitat/jardines-comunitarios/jardin_comunitario.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 13 features and 14 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.49029 ymin: -34.68363 xmax: -58.37125 ymax: -34.58307\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\ne_primerainfancia = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-desarrollo-humano-y-habitat/centros-primera-infancia/centros-de-primera-infancia.geojson\") %>% \r\n  conteo_interno(isocronas15,\"n_e_primerainfancia\")\r\n\r\nFALSE Reading layer `centros_de_primera_infancia' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-desarrollo-humano-y-habitat/centros-primera-infancia/centros-de-primera-infancia.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 76 features and 14 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.51595 ymin: -34.68693 xmax: -58.35589 ymax: -34.54864\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\ne_desarrolloi = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-desarrollo-humano-y-habitat/centros-desarrollo-infantil/centros-de-desarrollo-infantil.geojson\") %>% \r\n  conteo_interno(isocronas15,\"n_e_desarrolloi\")\r\n\r\nFALSE Reading layer `centros_de_desarrollo_infantil' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-desarrollo-humano-y-habitat/centros-desarrollo-infantil/centros-de-desarrollo-infantil.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 20 features and 14 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.66777 ymin: -34.6779 xmax: -58.3604 ymax: -34.54956\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\ne_educativos = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-educacion/establecimientos-educativos/establecimientos_educativos_WGS84.geojson\") %>% \r\n  conteo_interno(isocronas15,\"n_e_educativos\")\r\n\r\nFALSE Reading layer `establecimientos_educativos_WGS84' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-educacion/establecimientos-educativos/establecimientos_educativos_WGS84.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 2973 features and 27 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.52918 ymin: -34.69318 xmax: -58.35072 ymax: -34.53619\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\ne_universidades = read.xlsx(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-educacion/universidades/universidades.xlsx\") %>% \r\n  filter(!is.na(lat)) %>% \r\n  st_as_sf(coords = c(\"long\", \"lat\"), crs = 4326) %>% \r\n  conteo_interno(isocronas30,\"n_e_universidades\") \r\n\r\ne_bibliotecas = read.xlsx(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-cultura/bibliotecas/bibliotecas.xlsx\") %>% \r\n  filter(!is.na(lat)) %>% \r\n  st_as_sf(coords = c(\"long\", \"lat\"), crs = 4326) %>% \r\n  conteo_interno(isocronas30,\"n_e_bibliotecas\") \r\n\r\n\r\nLuego aplico la ponderación teniendo en cuenta la importancia de la presencia de estos servicios, y la cantidad necesaria para que la oferta sea variada y responda a la densidad poblacional.\r\n\r\nCódigo\r\n\r\n\r\n#LLAMO TODAS LAS BASES DE DATOS Y LAS FILTRO SEGUN SI SON DE LAS CATEGORIAS DE ANALISIS\r\nbases_de_datos <- ls() %>%\r\n  grep(\"^e_\", ., value = TRUE) %>%\r\n  lapply(get)\r\n\r\nbarrios_datos = f_barrios_datos() %>%  \r\n  mutate(subindice = ifelse(n_e_bibliotecas >= 2, 0.05, 0) +\r\n                     ifelse(n_e_desarrolloi >= 1, 0.05, 0)+\r\n                     ifelse(n_e_educativos >= 1, 0.05, 0)+\r\n                     ifelse(n_e_jardinesc >= 1, 0.4, 0)+\r\n                     ifelse(n_e_primerainfancia >= 1, 0.05, 0)+\r\n                     ifelse(n_e_universidades >= 1, 0.3, 0),\r\n         popup = paste(\"<strong> BARRIO: <\/strong>\", BARRIO,\"<br> \r\n                             <strong> ÁREA: <\/strong>\", AREAKM2, \"km2<br> \r\n                             <strong> I.EDUCACIÓN: <\/strong>\",subindice,\"<br> \r\n                             <strong>  ESTABLECIMIENTOS EDUCATIVOS: <\/strong>\", n_e_educativos,\"<br> \r\n                             <strong>  UNIVERSIDADES: <\/strong>\", n_e_universidades,\"<br> \r\n                             <strong>  CENTROS DE PRIMERA INFANCIA: <\/strong>\", n_e_primerainfancia,\"<br> \r\n                             <strong>  DESARROLLO INICIAL: <\/strong>\", n_e_desarrolloi,\"<br> \r\n                             <strong>  JARDINES COMUNITARIOS: <\/strong>\", n_e_jardinesc,\"<br> \r\n                             <strong>  BIBLIOTECAS: <\/strong>\", n_e_bibliotecas)\r\n           )\r\n\r\nbarrios_datos_e = barrios_datos\r\n\r\n\r\nSUBINDICE EDUCACIÓN|\r\nMapeo por barrio basado en los valores de la muestra\r\n\r\n\r\n\r\n\r\n05| Medio Ambiente\r\n\r\nSelecciono y cuento los espacios verdes y los puntos que representan focos de riesgo ambiental dentro de las isocronas. Los espacios verdes deberán estar a un máximo de 15min a pie, mientras que los focos de riesgo pueden tener efectos negativos sobre la vida de las personas incluso en un rango de 30min.\r\nEn este subíndice, las variables afectan positiva y negativamente el resultado.\r\n\r\nCódigo\r\n\r\n\r\n#MEDIO AMBIENTE-------------------------------------------------------------------\r\n\r\n#mb_arbolado = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/atencion-ciudadana/arbolado-publico-lineal/arbolado-publico-lineal-2017-2018.geojson\") %>% \r\n#  conteo_interno(\"n_tp_arbolado\")\r\n\r\nmb_eevv = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/secretaria-de-desarrollo-urbano/espacios-verdes/espacio_verde_publico.geojson\") %>% \r\n  st_make_valid() %>% \r\n  st_centroid() %>% \r\n  #hacer una ponderacion por tipo de espacio verde\r\n  mutate(clasificac = as.factor(clasificac)) %>% \r\n  conteo_interno(isocronas15,\"n_mb_eevv\")\r\n\r\nFALSE Reading layer `espacio_verde_publico_wgs84' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/secretaria-de-desarrollo-urbano/espacios-verdes/espacio_verde_publico.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 1896 features and 25 fields\r\nFALSE Geometry type: MULTIPOLYGON\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.53175 ymin: -34.70557 xmax: -58.33983 ymax: -34.52657\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\nriesgo1 = st_read(\"data/riesgo_poligonos.shp\") %>% \r\n  st_make_valid() %>% \r\n  st_transform(4326) %>% \r\n  st_centroid() %>% \r\n  select(valor)\r\n\r\nFALSE Reading layer `riesgo_poligonos' from data source \r\nFALSE   `I:\\Mi unidad\\02-ESTUDIOS\\00-MEU\\MU123 - Instrumentos de análisis urbano II\\IAUII_TRABAJO_FINAL\\data\\riesgo_poligonos.shp' \r\nFALSE   using driver `ESRI Shapefile'\r\nFALSE replacing null geometries with empty geometries\r\nFALSE Simple feature collection with 5011 features and 7 fields (with 2 geometries empty)\r\nFALSE Geometry type: POLYGON\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -71.58845 ymin: -54.81991 xmax: 5.824664 ymax: -4.00913\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\nriesgo2 = st_read(\"data/riesgo_puntos.shp\") %>% \r\n  st_make_valid() %>% \r\n  st_transform(4326) %>% \r\n  st_centroid() %>% \r\n  select(valor)\r\n\r\nFALSE Reading layer `riesgo_puntos' from data source \r\nFALSE   `I:\\Mi unidad\\02-ESTUDIOS\\00-MEU\\MU123 - Instrumentos de análisis urbano II\\IAUII_TRABAJO_FINAL\\data\\riesgo_puntos.shp' \r\nFALSE   using driver `ESRI Shapefile'\r\nFALSE Simple feature collection with 5534 features and 7 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -71.56022 ymin: -54.81807 xmax: -1.988486 ymax: -0.5894996\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\nmb_riesgo = rbind(riesgo1,riesgo2) %>% \r\n  conteo_interno(isocronas30,\"n_mb_riesgo\")\r\n\r\n\r\nAplico la ponderación teniendo en cuenta la importancia de la presencia/ausencia de estos espacios, y la cantidad para que se pueda afirmar que las personas que habitan este territorio acceden a un medio ambiente sano.\r\n\r\nCódigo\r\n\r\n\r\n#LLAMO TODAS LAS BASES DE DATOS Y LAS FILTRO SEGUN SI SON DE LAS CATEGORIAS DE ANALISIS\r\nbases_de_datos <- ls() %>%\r\n  grep(\"^mb_\", ., value = TRUE) %>%\r\n  lapply(get)\r\n\r\nbarrios_datos = f_barrios_datos() %>% \r\n  mutate(subindice = ifelse(n_mb_eevv >= 1, 1, 0) +\r\n                     ifelse(n_mb_riesgo >= 1, -1, 0),\r\n         popup = paste(\"<strong> BARRIO: <\/strong>\", BARRIO,\"<br> \r\n                             <strong> ÁREA: <\/strong>\", AREAKM2, \"km2<br> \r\n                             <strong> I.MEDIO AMBIENTE: <\/strong>\",subindice,\"<br> \r\n                             <strong>  ESPACIOS VERDES: <\/strong>\", n_mb_eevv,\"<br> \r\n                             <strong>  FOCOS DE RIESGO AMBIENTAL: <\/strong>\", n_mb_riesgo))\r\n\r\nbarrios_datos_mb = barrios_datos\r\n\r\n\r\nSUBINDICE MEDIO AMBIENTE|\r\nMapeo por barrio basado en los valores de la muestra\r\n\r\n\r\n\r\n\r\n06| Recreación\r\n\r\nSelecciono y cuento los puntos de oferta para realizar actividades recreativas dentro de las isocronas según nivel de cotidianeidad de la necesidad y alcance/dimensión de los equipamientos (ej:estadios).\r\nLas bases disponibles cuentan con datos de:\r\n- Jugotecas (15min)\r\n- Estadios (30min)\r\n- Zonas de prioridad peatonal (15min)\r\n- Centros de jubilados (15min)\r\n- Locales bailables (30min)\r\n\r\nCódigo\r\n\r\n\r\n# RECREACION----------------------------------------------------------\r\n\r\nr_jugotecas = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-desarrollo-humano-y-habitat/juegotecas-barriales/juegotecas-barriales.geojson\") %>% \r\n  conteo_interno(isocronas15,\"n_r_jugotecas\")\r\n\r\nFALSE Reading layer `juegotecas' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-desarrollo-humano-y-habitat/juegotecas-barriales/juegotecas-barriales.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 19 features and 14 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.52499 ymin: -34.68361 xmax: -58.35828 ymax: -34.55052\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\nr_estadios = read.xlsx(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/vicejefatura-de-gobierno/estadios/estadios.xlsx\") %>% \r\n  st_as_sf(coords = c(\"long\", \"lat\"), crs = 4326) %>% \r\n  conteo_interno(isocronas30,\"n_r_estadios\") \r\n\r\nr_peatonal = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-desarrollo-humano-y-habitat/juegotecas-barriales/juegotecas-barriales.geojson\") %>% \r\n  conteo_interno(isocronas15,\"n_r_peatonal\")\r\n\r\nFALSE Reading layer `juegotecas' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-desarrollo-humano-y-habitat/juegotecas-barriales/juegotecas-barriales.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 19 features and 14 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.52499 ymin: -34.68361 xmax: -58.35828 ymax: -34.55052\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\nr_jubilados = read.xlsx(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-desarrollo-humano-y-habitat/centros-jubilados/centros-de-jubilados-reempadronados.xlsx\") %>% \r\n  filter(!is.na(lat)) %>% \r\n  st_as_sf(coords = c(\"long\", \"lat\"), crs = 4326) %>% \r\n  conteo_interno(isocronas15,\"n_r_jubilados\") \r\n\r\n#TRABAJO SOBRE LA BASE DE DATOS DE LOCALES BAILABLES PARA ASIGNAR GEOMETRIA EN BASE A LAS DIRECCIONES DISPONIBLES:\r\n\r\n#r_bailables = read.xlsx(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/agencia-gubernamental-de-control/locales-bailables/locales_bailables.xlsx\")%>% \r\n  #clean_names() %>% \r\n  #mutate(direccion = paste0(domicilio,\" \",no, \", Ciudad de Buenos Aires, Argentina\")) %>% \r\n  #filter(!grepl(\"VENCI|SUSP|BAJA|DENE\", estado)) %>% \r\n  #filter(!is.na(estado)) \r\n\r\n#evito problemas por cortes en la busqueda y después guardo el archivo y desactivo esta parte del código porque se demora mucho\r\n#Sys.sleep(1)\r\n\r\n#r_bailables = r_bailables %>%\r\n  #geocode(address = direccion, method = \"osm\")\r\n\r\n#r_bailables = r_bailables %>%\r\n  #filter(!is.na(lat)) %>% \r\n  #st_as_sf(coords = c(\"long\", \"lat\"), crs = 4326) %>% \r\n  #st_write(\"data/r_bailables.geojson\")\r\n\r\nr_bailables =  st_read(\"data/r_bailables.geojson\") %>% \r\n  conteo_interno(isocronas30,\"n_r_bailables\") \r\n\r\nFALSE Reading layer `r_bailables' from data source \r\nFALSE   `I:\\Mi unidad\\02-ESTUDIOS\\00-MEU\\MU123 - Instrumentos de análisis urbano II\\IAUII_TRABAJO_FINAL\\data\\r_bailables.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 55 features and 15 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.51769 ymin: -34.66068 xmax: -58.36259 ymax: -34.55232\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\nAplico la ponderación teniendo en cuenta la importancia de la presencia/ausencia de estos espacios, y la cantidad para que se pueda afirmar que las personas que habitan este territorio acceden a un medio ambiente sano.\r\n\r\nCódigo\r\n\r\n\r\n#LLAMO TODAS LAS BASES DE DATOS Y LAS FILTRO SEGUN SI SON DE LAS CATEGORIAS DE ANALISIS\r\nbases_de_datos <- ls() %>%\r\n  grep(\"^r_\", ., value = TRUE) %>%\r\n  lapply(get)\r\n\r\nbarrios_datos = f_barrios_datos() %>% \r\n  mutate(subindice = ifelse(n_r_bailables >= 1, 0.05, 0) +\r\n                     ifelse(n_r_estadios >= 1, 0.1, 0)+\r\n                     ifelse(n_r_jubilados >= 1, 0.2, 0)+\r\n                     ifelse(n_r_jugotecas >= 1, 0.25, 0)+\r\n                     ifelse(n_r_peatonal >= 1, 0.4, 0)) %>% \r\n  mutate(popup = paste(\"<strong> BARRIO: <\/strong>\", BARRIO,\"<br> \r\n                             <strong> ÁREA: <\/strong>\", AREAKM2, \"km2<br> \r\n                             <strong> I.RECREACIÓN: <\/strong>\",subindice,\"<br> \r\n                             <strong>  ZONAS PEATONALES: <\/strong>\", n_r_peatonal,\"<br> \r\n                             <strong>  ESTADIOS: <\/strong>\", n_r_estadios, \"<br> \r\n                             <strong>  CENTROS DE JUBILADOS: <\/strong>\", n_r_jubilados,\"<br> \r\n                             <strong>  JUGOTECAS: <\/strong>\", n_r_jugotecas,\"<br> \r\n                             <strong>  LOCALES BAILABLES: <\/strong>\", n_r_bailables))\r\n\r\nbarrios_datos_r = barrios_datos\r\n\r\n\r\nSUBINDICE RECREACIÓN|\r\nMapeo por barrio basado en los valores de la muestra\r\n\r\n\r\n\r\n\r\n07| Salud\r\n\r\nSelecciono y cuento los puntos de equipamiento para la salud dentro de las isocronas según nivel de cotidianeidad de la necesidad y alcance/dimensión de los equipamientos (ej:hospitales).\r\nLas bases disponibles cuentan con datos de:\r\n- Centros médicos barriales (15min)\r\n- Centros de desarrollo infantil (15min)\r\n- Centros de Salud y Acción Comunitaria (CeSAC) (15min)\r\n- Centros de atención integral para la mujer (15min)\r\n- Estaciones Saludables (15min)\r\n- Farmacias (15min)\r\n- Geriátricos (30min)\r\n- Hospitales (30min)\r\n- Centros de salud privados (30min)\r\n- Unidades febriles de urgencia (30min)\r\n- Centros de vacunación infantil (15min)\r\n- Centros de vacunación para adultos mayores (15min)\r\n\r\nCódigo\r\n\r\n\r\n# SALUD-------------------------------------------------------------------------\r\n\r\ns_ufebriles = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-salud/ufus/ubicacion-ufus.geojson\")  %>% \r\n  conteo_interno(isocronas15,\"n_s_ufebriles\")\r\n\r\nFALSE Reading layer `ufus2' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-salud/ufus/ubicacion-ufus.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 18 features and 4 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.51563 ymin: -34.67177 xmax: -58.36593 ymax: -34.56505\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\ns_cimujer = read.xlsx(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-desarrollo-humano-y-habitat/centros-integrales-mujer/centros-integrales-de-la-mujer.xlsx\") %>% \r\n  filter(!is.na(lat)) %>% \r\n  st_as_sf(coords = c(\"long\", \"lat\"), crs = 4326) %>% \r\n  conteo_interno(isocronas15,\"n_s_cimujer\")\r\n\r\ns_hospitales = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-salud/hospitales/hospitales.geojson\")  %>% \r\n  conteo_interno(isocronas30,\"n_s_hospitales\")\r\n\r\nFALSE Reading layer `hospitales_gcba_WGS84' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-salud/hospitales/hospitales.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 36 features and 19 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.51563 ymin: -34.67185 xmax: -58.36012 ymax: -34.5539\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\ns_cdinfantil = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-desarrollo-humano-y-habitat/centros-desarrollo-infantil/centros-de-desarrollo-infantil.geojson\")  %>% \r\n  conteo_interno(isocronas15,\"n_s_cdinfantil\")\r\n\r\nFALSE Reading layer `centros_de_desarrollo_infantil' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-desarrollo-humano-y-habitat/centros-desarrollo-infantil/centros-de-desarrollo-infantil.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 20 features and 14 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.66777 ymin: -34.6779 xmax: -58.3604 ymax: -34.54956\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\ns_farmacias = read.xlsx(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-salud/farmacias/farmacias.xlsx\") %>% \r\n  filter(!is.na(lat)) %>% \r\n  st_as_sf(coords = c(\"long\", \"lat\"), crs = 4326) %>% \r\n  conteo_interno(isocronas15,\"n_s_farmacias\")\r\n\r\ns_privados = read.xlsx(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-salud/centros-salud-privados/centros-de-salud-privados.xlsx\") %>% \r\n  filter(!is.na(lat)) %>% \r\n  st_as_sf(coords = c(\"long\", \"lat\"), crs = 4326) %>% \r\n  conteo_interno(isocronas30,\"n_s_privados\")\r\n\r\ns_vinfantil = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-salud/vacunatorios-infantiles/vacunatorios_infantiles_WGS84.geojson\")  %>% \r\n  conteo_interno(isocronas30,\"n_s_vinfantil\")\r\n\r\nFALSE Reading layer `vacunatorios_infantiles_WGS84' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-salud/vacunatorios-infantiles/vacunatorios_infantiles_WGS84.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 80 features and 11 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.52564 ymin: -34.68463 xmax: -58.35801 ymax: -34.54766\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\ns_cesac = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-salud/centros-salud-accion-comunitaria-cesac/centros_de_salud_nivel_1_BADATA_WGS84.geojson\")  %>% \r\n  conteo_interno(isocronas15,\"n_s_cesac\")\r\n\r\nFALSE Reading layer `centros_de_salud_nivel_1' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-salud/centros-salud-accion-comunitaria-cesac/centros_de_salud_nivel_1_BADATA_WGS84.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 45 features and 22 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.5095 ymin: -34.68464 xmax: -58.35792 ymax: -34.54765\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\ns_vmayores = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-salud/vacunatorios-adultos-mayores/vacunatorios-adultos-mayores.geojson\")  %>% \r\n  conteo_interno(isocronas30,\"n_s_vmayores\")\r\n\r\nFALSE Reading layer `vacunacion' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-salud/vacunatorios-adultos-mayores/vacunatorios-adultos-mayores.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 80 features and 6 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.5253 ymin: -34.68989 xmax: -58.37062 ymax: -34.54537\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\ns_barriales = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-salud/centros-medicos-barriales/centros-medicos-barriales.geojson\")  %>% \r\n  conteo_interno(isocronas15,\"n_s_barriales\") %>% \r\n  mutate(BARRIO = toupper(BARRIO))\r\n\r\nFALSE Reading layer `centros_medicos_barriales_WGS84' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-salud/centros-medicos-barriales/centros-medicos-barriales.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 31 features and 13 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.52671 ymin: -34.66984 xmax: -58.37052 ymax: -34.54479\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\ns_geriatricos = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-justicia-y-seguridad/geriatricos/geriatricos.geojson\")  %>% \r\n  conteo_interno(isocronas30,\"n_s_geriatricos\")\r\n\r\nFALSE Reading layer `GERIATRICOS' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-justicia-y-seguridad/geriatricos/geriatricos.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 475 features and 17 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.52936 ymin: -34.69044 xmax: -58.37086 ymax: -34.53981\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\ns_esaludables = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/vicejefatura-de-gobierno/estaciones-saludables/estaciones-saludables.geojson\")  %>% \r\n  conteo_interno(isocronas15,\"n_s_esaludables\")\r\n\r\nFALSE Reading layer `estaciones_saludables_WGS84' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/vicejefatura-de-gobierno/estaciones-saludables/estaciones-saludables.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 5 features and 14 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.47952 ymin: -34.63806 xmax: -58.40636 ymax: -34.55088\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\nAplico la ponderación teniendo en cuenta la importancia de la presencia/ausencia de estos espacios, y la cantidad para que se pueda afirmar que las personas que habitan este territorio acceden a un medio ambiente sano.\r\n\r\nCódigo\r\n\r\n\r\n#LLAMO TODAS LAS BASES DE DATOS Y LAS FILTRO SEGUN SI SON DE LAS CATEGORIAS DE ANALISIS\r\nbases_de_datos <- ls() %>%\r\n  grep(\"^s_\", ., value = TRUE) %>%\r\n  lapply(get)\r\n\r\nbarrios_datos = f_barrios_datos() %>% \r\n  mutate(subindice = ifelse(n_s_ufebriles >= 1, 0.06, 0) +\r\n                     ifelse(n_s_cimujer >= 1, 0.05, 0)+\r\n                     ifelse(n_s_hospitales >= 1, 0.2, 0)+\r\n                     ifelse(n_s_cdinfantil >= 1, 0.05, 0)+\r\n                     ifelse(n_s_farmacias >= 1, 0.1, 0)+\r\n                     ifelse(n_s_privados >= 1, 0.05, 0)+\r\n                     ifelse(n_s_vinfantil >= 1, 0.02, 0)+\r\n                     ifelse(n_s_cesac >= 1, 0.3, 0)+\r\n                     ifelse(n_s_vmayores >= 1, 0.02, 0)+\r\n                     ifelse(n_s_barriales >= 1, 0.05, 0)+\r\n                     ifelse(n_s_geriatricos >= 1, 0.05, 0)+\r\n                     ifelse(n_s_esaludables >= 1, 0.05, 0)) %>% \r\n  mutate(popup = paste(\"<strong> BARRIO: <\/strong>\", BARRIO,\"<br> \r\n                             <strong> ÁREA: <\/strong>\", AREAKM2, \"km2<br> \r\n                             <strong> I.SALUD: <\/strong>\",subindice,\"<br> \r\n                             <strong>  UNIDADES FEBRILES: <\/strong>\", n_s_ufebriles,\"<br> \r\n                             <strong>  CENTROS MUJER: <\/strong>\", n_s_cimujer, \"<br> \r\n                             <strong>  HOSPITALES: <\/strong>\", n_s_hospitales,\"<br> \r\n                             <strong>  CENTROS DESARROLLO INFANTIL: <\/strong>\", n_s_cdinfantil,\"<br> \r\n                             <strong>  FARMACIAS: <\/strong>\", n_s_farmacias,\"<br> \r\n                             <strong>  CENTROS PRIVADOS: <\/strong>\", n_s_privados,\"<br> \r\n                             <strong>  VACUNACION INFANTIL: <\/strong>\", n_s_vinfantil,\"<br> \r\n                             <strong>  CESACs: <\/strong>\", n_s_cesac,\"<br> \r\n                             <strong>  VACUNACION MAYORES: <\/strong>\", n_s_vmayores,\"<br> \r\n                             <strong>  CENTROS BARRIALES: <\/strong>\", n_s_barriales,\"<br> \r\n                             <strong>  GERIATRICOS: <\/strong>\", n_s_geriatricos,\"<br> \r\n                             <strong>  ESTACIONES SALUDABLES: <\/strong>\", n_s_esaludables))\r\n\r\nbarrios_datos_s = barrios_datos\r\n\r\n\r\nSUBINDICE SALUD|\r\nMapeo por barrio basado en los valores de la muestra\r\n\r\n\r\n\r\n\r\n08| Seguridad\r\n\r\nSelecciono y cuento los puntos de equipamiento de seguridad dentro de las isocronas.\r\nLas bases disponibles cuentan con datos de:\r\n- Comisarias (30min)\r\n- Cuarteles y destacamentos de bomberos (30min)\r\n\r\nCódigo\r\n\r\n\r\n# SEGURIDAD---------------------------------------------------------------------\r\n\r\n#TOMO CADA BASE DE DATOS, LA INTERSECTO Y HAGO EL CONTEO:\r\n\r\nse_comisarias = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-justicia-y-seguridad/comisarias-policia-ciudad/comisarias-policia-de-la-ciudad.geojson\") %>% \r\n  select(nombre, nom_2,tipo) %>% \r\n  conteo_interno(isocronas30,\"n_se_comisarias\")\r\n\r\nFALSE Reading layer `comisarias_policia_de_la_ciudad_geojson' from data source `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-justicia-y-seguridad/comisarias-policia-ciudad/comisarias-policia-de-la-ciudad.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 57 features and 18 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.52697 ymin: -34.68367 xmax: -58.35999 ymax: -34.55155\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\nse_bomberos = read.csv(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-justicia-y-seguridad/cuarteles-destacamentos-bomberos/cuarteles-y-destacamentos-de-bomberos-de-policia-federal-argentina.csv\",\r\n                    stringsAsFactors = T) %>% \r\n  select(long,lat,dcia,gestion) %>% \r\n  st_as_sf(coords = c(\"long\", \"lat\"), crs = 4326) %>% \r\n  conteo_interno(isocronas30,\"n_se_bomberos\")\r\n\r\n\r\nAplico la ponderación teniendo en cuenta la importancia de la presencia/ausencia de estos espacios, y la cantidad para que se pueda afirmar que las personas que habitan este territorio acceden a un medio ambiente sano.\r\n\r\nCódigo\r\n\r\n\r\n#LLAMO TODAS LAS BASES DE DATOS Y LAS FILTRO SEGUN SI SON DE LAS CATEGORIAS DE ANALISIS\r\nbases_de_datos <- ls() %>%\r\n  grep(\"^se_\", ., value = TRUE) %>%\r\n  lapply(get)\r\n\r\nbarrios_datos = f_barrios_datos() %>% \r\n  mutate(subindice = ifelse(n_se_comisarias >= 1, 0.5, 0) +\r\n                     ifelse(n_se_bomberos >= 1, 0.5, 0)) %>% \r\n  mutate(popup = paste(\"<strong> BARRIO: <\/strong>\", BARRIO,\"<br> \r\n                             <strong> ÁREA: <\/strong>\", AREAKM2, \"km2<br> \r\n                             <strong> I.SEGURIDAD: <\/strong>\",subindice,\"<br> \r\n                             <strong>  COMISARIAS: <\/strong>\", n_se_comisarias,\"<br> \r\n                             <strong>  BOMBEROS: <\/strong>\", n_se_bomberos))\r\n\r\nbarrios_datos_se = barrios_datos\r\n\r\n\r\nSUBINDICE SEGURIDAD|\r\nMapeo por barrio basado en los valores de la muestra\r\n\r\n\r\n\r\n\r\n09| Tramites\r\n\r\n\r\nCódigo\r\n\r\n\r\n#TRAMITES-----------------------------------------------------------------------\r\n\r\n#OBTENGO LOS PUNTOS DE ATENCION CIUDADANA BUSCANDO LAS DIRECCIONES QUE FIGURAN EN LA BASE DE DATOS:\r\n\r\n#t_puntos = read.xlsx(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-gobierno/puntos-atencion/puntos-de-atencion.xlsx\") %>% \r\n#  mutate(direccion = paste0(calle_nombre,\" \",calle_altura, \", Ciudad de Buenos Aires, Argentina\"))\r\n\r\n#evito problemas por cortes en la busqueda y después guardo el archivo y desactivo esta parte del código porque se demora mucho\r\n#Sys.sleep(1)\r\n\r\n#t_puntos = t_puntos %>%\r\n#  geocode(address = direccion, method = \"osm\")\r\n\r\n#st_write(t_puntos, \"data/t_puntos.geojson\")\r\n\r\nt_puntos = st_read(\"data/t_puntos.geojson\") %>% \r\n  filter(!is.na(lat)) %>% \r\n  st_drop_geometry(geometry) %>% \r\n  st_as_sf(coords = c(\"long\", \"lat\"), crs = 4326) %>% \r\n  conteo_interno(isocronas15,\"n_t_puntos\")\r\n\r\nFALSE Reading layer `a_puntos' from data source \r\nFALSE   `I:\\Mi unidad\\02-ESTUDIOS\\00-MEU\\MU123 - Instrumentos de análisis urbano II\\IAUII_TRABAJO_FINAL\\data\\t_puntos.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE replacing null geometries with empty geometries\r\nFALSE Simple feature collection with 848 features and 16 fields (with 848 geometries empty)\r\nFALSE Geometry type: GEOMETRYCOLLECTION\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: NA ymin: NA xmax: NA ymax: NA\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\nt_cajeros = read.xlsx(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/secretaria-de-desarrollo-urbano/cajeros-automaticos/cajeros-automaticos.xlsx\") %>% \r\n  filter(!is.na(lat)) %>% \r\n  st_as_sf(coords = c(\"long\", \"lat\"), crs = 4326) %>% \r\n  select(id)\r\n\r\nt_bancos = read.xlsx(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-economia-y-finanzas/bancos/bancos.xlsx\") %>% \r\n  filter(!is.na(lat)) %>% \r\n  st_as_sf(coords = c(\"long\", \"lat\"), crs = 4326) %>% \r\n  select(id)\r\n\r\nt_bancosyc = rbind(t_bancos,t_cajeros) %>% \r\n  mutate(geos = as.character(geometry)) %>% \r\n  filter(!duplicated(geos)) %>% \r\n  conteo_interno(isocronas15,\"n_t_bancosyc\")\r\n\r\nrm(t_bancos,t_cajeros)\r\n\r\n\r\nAplico la ponderación teniendo en cuenta la importancia de la presencia/ausencia de estos espacios, y la cantidad para que se pueda afirmar que las personas que habitan este territorio acceden a un medio ambiente sano.\r\n\r\nCódigo\r\n\r\n\r\n#LLAMO TODAS LAS BASES DE DATOS Y LAS FILTRO SEGUN SI SON DE LAS CATEGORIAS DE ANALISIS\r\nbases_de_datos <- ls() %>%\r\n  grep(\"^t_\", ., value = TRUE) %>%\r\n  lapply(get)\r\n\r\nbarrios_datos = f_barrios_datos() %>% \r\n  mutate(subindice = ifelse(n_t_puntos >= 1, 0.4, 0) +\r\n                     ifelse(n_t_bancosyc >= 4, 0.6, 0)) %>% \r\n  mutate(popup = paste(\"<strong> BARRIO: <\/strong>\", BARRIO,\"<br> \r\n                             <strong> ÁREA: <\/strong>\", AREAKM2, \"km2<br> \r\n                             <strong> I.TRÁMITES: <\/strong>\",subindice,\"<br> \r\n                             <strong>  PUNTOS DE ATENCIÓN: <\/strong>\", n_t_puntos,\"<br> \r\n                             <strong>  BOMBEROS: <\/strong>\", n_t_bancosyc))\r\n\r\nbarrios_datos_t = barrios_datos\r\n\r\n\r\nSUBINDICE TRAMITES|\r\nMapeo por barrio basado en los valores de la muestra\r\n\r\n\r\n\r\n\r\n10| Transporte\r\n\r\n\r\nCódigo\r\n\r\n\r\n#TRANSPORTE---------------------------------------------------------------------\r\n\r\ntp_colectivos = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/transporte-y-obras-publicas/colectivos-paradas/paradas-de-colectivo.geojson\") %>% \r\n  conteo_interno(isocronas15,\"n_tp_colectivos\")\r\n\r\nFALSE Reading layer `Paradas_Colectivos' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/transporte-y-obras-publicas/colectivos-paradas/paradas-de-colectivo.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 6931 features and 19 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -583445500 ymin: -34.70066 xmax: -58.34234 ymax: -34.53648\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\ntp_bicis = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/transporte-y-obras-publicas/estaciones-bicicletas-publicas/nuevas-estaciones-bicicletas-publicas.geojson\") %>% \r\n  conteo_interno(isocronas15,\"n_tp_bicis\")\r\n\r\nFALSE Reading layer `bicis' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/transporte-y-obras-publicas/estaciones-bicicletas-publicas/nuevas-estaciones-bicicletas-publicas.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 471 features and 11 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.5217 ymin: -34.6832 xmax: -58.3556 ymax: -34.5414\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\ntp_subte = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/sbase/subte-estaciones/estaciones-de-subte.geojson\") %>% \r\n  conteo_interno(isocronas15,\"n_tp_subte\")\r\n\r\nFALSE Reading layer `estaciones_de_subte_WGS84' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/sbase/subte-estaciones/estaciones-de-subte.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 90 features and 3 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.48639 ymin: -34.64331 xmax: -58.36993 ymax: -34.55564\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\ntp_ffcc = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/transporte-y-obras-publicas/estaciones-ferrocarril/estaciones-de-ferrocarril.geojson\") %>% \r\n  conteo_interno(isocronas15,\"n_tp_ffcc\")\r\n\r\nFALSE Reading layer `estaciones_ferrocarril' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/transporte-y-obras-publicas/estaciones-ferrocarril/estaciones-de-ferrocarril.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 230 features and 11 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -59.43367 ymin: -35.57908 xmax: -57.91904 ymax: -34.09791\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\ntp_garagec = st_read(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/transporte-y-obras-publicas/garajes-comerciales/garajes-comerciales.geojson\") %>% \r\n  conteo_interno(isocronas15,\"n_tp_garagec\")\r\n\r\nFALSE Reading layer `garajes_comerciales_WGS84' from data source \r\nFALSE   `https://cdn.buenosaires.gob.ar/datosabiertos/datasets/transporte-y-obras-publicas/garajes-comerciales/garajes-comerciales.geojson' \r\nFALSE   using driver `GeoJSON'\r\nFALSE Simple feature collection with 2759 features and 9 fields\r\nFALSE Geometry type: POINT\r\nFALSE Dimension:     XY\r\nFALSE Bounding box:  xmin: -58.52865 ymin: -34.69619 xmax: -58.34851 ymax: -34.53931\r\nFALSE Geodetic CRS:  WGS 84\r\n\r\ntp_garagem = read.xlsx(\"https://cdn.buenosaires.gob.ar/datosabiertos/datasets/transporte-y-obras-publicas/estacionamientos-motos/estacionamientos-de-motos-publico.xlsx\") %>% \r\n  filter(!is.na(lat)) %>% \r\n  st_as_sf(coords = c(\"long\", \"lat\"), crs = 4326) %>% \r\n  conteo_interno(isocronas15,\"n_tp_garagem\")\r\n\r\n\r\nAplico la ponderación teniendo en cuenta la importancia de la presencia/ausencia de estos espacios, y la cantidad para que se pueda afirmar que las personas que habitan este territorio acceden a un medio ambiente sano.\r\n\r\nCódigo\r\n\r\n\r\n#LLAMO TODAS LAS BASES DE DATOS Y LAS FILTRO SEGUN SI SON DE LAS CATEGORIAS DE ANALISIS\r\nbases_de_datos <- ls() %>%\r\n  grep(\"^tp_\", ., value = TRUE) %>%\r\n  lapply(get)\r\n\r\nbarrios_datos = f_barrios_datos() %>% \r\n  mutate(subindice = ifelse(n_tp_colectivos >= 4, 0.3, 0) +\r\n                     ifelse(n_tp_bicis >= 1, 0.1, 0)+\r\n                     ifelse(n_tp_subte >= 1, 0.25, 0)+\r\n                     ifelse(n_tp_ffcc >= 1, 0.25, 0)+\r\n                     ifelse(n_tp_garagec >= 1, 0.05, 0)+\r\n                     ifelse(n_tp_garagem >= 1, 0.05, 0)) %>% \r\n  mutate(popup = paste(\"<strong> BARRIO: <\/strong>\", BARRIO,\"<br> \r\n                             <strong> ÁREA: <\/strong>\", AREAKM2, \"km2<br> \r\n                             <strong> I.TRANSPORTE: <\/strong>\",subindice,\"<br> \r\n                             <strong>  COLECTIVOS: <\/strong>\", n_tp_colectivos,\"<br> \r\n                             <strong>  ECO-BICIS: <\/strong>\", n_tp_bicis,\"<br> \r\n                             <strong>  SUBTE: <\/strong>\", n_tp_subte,\"<br> \r\n                             <strong>  FFCC: <\/strong>\", n_tp_ffcc,\"<br> \r\n                             <strong>  GARAGE C.: <\/strong>\", n_tp_garagec,\"<br> \r\n                             <strong>  GARAGE M.: <\/strong>\", n_tp_garagem))\r\n\r\nbarrios_datos_tp = barrios_datos\r\n\r\n\r\nSUBINDICE TRANSPORTE|\r\nMapeo por barrio basado en los valores de la muestra\r\n\r\n\r\n\r\n\r\nCONSTRUCCIÓN DEL ÍNDICE \r\n | Ponderación de los Ejes \r\n\r\n\r\nCódigo\r\n\r\n\r\n#LLAMO TODAS LAS BASES DE DATOS Y LAS FILTRO SEGUN SI SON DE LAS CATEGORIAS DE ANALISIS\r\nbases_de_datos <- ls() %>%\r\n  grep(\"^a_|^d_|^e_|^r_|^s_|^se_|^t_\", ., value = TRUE) %>%\r\n  lapply(get)\r\n\r\n# ARMO UNA BASE UNIFICADA HACIENDO LEFT_JOINS ITERATIVOS CON AS BD\r\nisocronas_datos <- bases_de_datos %>% \r\n  reduce(function(df1, df2) {\r\n    left_join(df1, df2 %>% st_drop_geometry(), by = \"BARRIO\") %>%\r\n      replace(is.na(.), 0)\r\n  }, .init = isocronas_barrios)\r\n\r\n\r\n\r\nCONCLUSIONES \r\n | Y Aprendizajes \r\n\r\n\r\nSobre el contenido\r\n\r\nInclusión del eje laboral.\r\nContar con bases de datos necesarias.\r\nPonderación rigurosa construida en base a conocimientos multidisciplinarios.\r\n\r\nSobre el ejercicio para abordar el contenido\r\n\r\nDiferentes herramientas de comunicación.\r\nSimplificación del código.\r\nReducción de tiempos para el procesamiento de datos.\r\nUsar otro punto dentro de cada barrio para mejorar la representatividad de la muestra,\r\nConocimientos personales para no romper todo cada 2x3…\r\n\r\nPRÓXIMOS PASOS \r\n | Nuevos temas a desarrollar \r\n\r\nProfundizar el análisis de las ciudades de proximidad, desde la mirada de:\r\nPersonas con movilidad reducida\r\nAdultos mayores\r\nInfancias\r\nMujeres y disidencias\r\nUrbanizaciones informales\r\n\r\n\r\n\r\n",
      "last_modified": "2023-12-23T19:16:33-03:00"
    },
    {
      "path": "fuentes.html",
      "title": "Fuentes",
      "description": "Origen de la información y referencias",
      "author": [],
      "contents": "\r\nAclaración inicial: me embarqué muy contenta en esta empresa y con medio tp ya desarrollado encontré este hermoso trabajo que básicamente hace lo que yo quería, pero mil veces mejor, así que lo tomé como referencia en algunos puntos, pero me propuse de todas maneras seguir construyendo mi propio camino.\r\n\r\nBases de Datos \r\n | Identificación, fuentes y observaciones \r\n\r\n\r\n\r\n\r\n\r\nBibliografía \r\n | Textos y videos \r\n\r\n\r\n\r\n\r\n",
      "last_modified": "2023-12-23T14:21:23-03:00"
    },
    {
      "path": "index.html",
      "title": "Instrumentos de Análisis Urbano II",
      "description": "Trabajo Final\n",
      "author": [],
      "contents": "\r\nEl presente trabajo responde a las consignas de los docentes Juan Pablo Ruiz Nicolini (TuQ) y Pablo Tiscornia, para evaluar lo aprendido durante el curso de Instrumentos de Análisis Urbano II, dictado en la Maestría en Economía Urbana de la Universidad Torcuato Di Tella.\r\nPágina de Referencia\r\n\r\n\r\n\r\n",
      "last_modified": "2023-12-23T14:21:25-03:00"
    }
  ],
  "collections": []
}
